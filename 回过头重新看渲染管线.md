## 定义

渲染**管线**是 OpenGL 在渲染对象时采取的步骤序列，也就是计算机图形系统将三维模型[渲染](https://zh.wikipedia.org/wiki/%E6%B8%B2%E6%9F%93 "渲染")到二维屏幕上的过程。

搬运下wiki上的管线图片

![图片](static/RenderingPipeline.png)
## Vertex Specification 顶点规范

渲染管线的第一个阶段，顶点规范是指为了使用特定的着色器程序进行渲染，而设置所需的对象以及使用这些对象进行渲染的过程。对象包括顶点数组对象、缓冲对象、顶点属性等，它们定义了顶点数据的来源和格式。顶点规范是渲染管线中的第一个阶段，它决定了后续阶段如何处理顶点数据。

### Vertex Stream 顶点流

要想进行渲染，你必须使用一个包含顶点着色器的着色器程序或程序管线。顶点着色器的用户自定义输入变量定义了该着色器所期望的顶点属性列表，其中每个属性都映射到一个用户自定义输入变量。这组属性定义了顶点流必须提供哪些值才能正确地渲染。

比如以下着色器
```glsl

attribute vec3 position;

void main() {
  // .....
}
```

这个顶点着色器自定义了预期期望的顶点属性position, 那么顶点流必须提供这个值才能正确渲染。

顶点流中的顶点顺序非常重要: 

这个顺序决定了OpenGL如何处理和渲染由顶点流生成的图元。有两种方式可以用顶点数组进行渲染。

- 你可以按照数组的顺序生成一个流，

- 或者你可以使用一个索引列表来定义顺序。索引控制接收顶点的顺序，而且索引可以多次指定同一个数组元素。

假设你有一个包含三个顶点的三维位置数据的数组，如下所示：
```js
{ {1, 1, 1}, {0, 0, 0}, {0, 0, 1} }
```

Opengl将会按照顺序接受和处理这三个顶点，但是也可以指定另外一个索引列表，该列表将会指定索引的顶点及顺序

假设我们有以下索引列表：
```js
{2, 1, 0, 2, 1, 2}
```

如果我们使用上面的属性数组渲染，但由索引列表选择，OpenGL 将收到以下顶点属性数据流：
```js
{ {0, 0, 1}, {0, 0, 0}, {1, 1, 1}, {0, 0, 1}, {0, 0, 0}, {0, 0, 1} }
```

### Primitives 图元

上面的流还不足以绘制任何东西；你还必须告诉OpenGL如何解释这个流。这意味着你要告诉OpenGL用什么样的图元来解释这个流。

可以是三角形、点或线，具体来说，线也可以是直线或者是线段，三角形既可以是首尾相连的也可以是扇形向量的

### Primitive的含义

在OpenGL中，Primitive这个术语用来指代两个相似但不同的概念。第一个意思是指OpenGL用来确定一组顶点在渲染时代表什么的解释方式，比如“GL_POINTS”, 这就是在顶点流中的解释含义。

另一个意思是指作为**Primitive Assembly**部分的一组顶点的解释结果，也称为“**base primitive（ 基元 ）**”。

**Primitive Assembly**作为渲染管线的第六个阶段，暂时按下不表

## Vertex Processing 顶点处理

顶点处理阶段几乎都是可编程的操作。这允许用户代码自定义顶点的处理方式。每个阶段代表一种不同的着色器操作。

主要有三种着色器在此阶段可用，**Vertex Shader 顶点着色器**，**Tessellation Shader 曲面细分着色器**，**Geometry Shader 几何着色器**

